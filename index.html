<style>:root {
  font-size: 70%;
  --gutters: 10px;
  --bg: rgb(0,0,0);//rgb(39, 39, 44);
  --card: rgb(35, 49, 54);
  --card2: rgb(230, 230, 230);
  --bg2: rgb(248, 248, 242);
  --text: white;
  --text2: black;
  --key2: rgb(30, 30, 70);
  --trimColor:orange;
}
body {
  transition:background-color .5s linear;
  cursor:grab;
  font-family: "Marcellus", cursive;
  color: var(--text);
  background-color: var(--bg);
  font-size: clamp(1em, 2vmin, 1.5em);
  #lightMode {
    z-index:100;
    position:fixed;
    font-size: 150%;
    span {
      padding: 5px;
      &.disabled {
        filter: grayscale(100%);
      }
      &:hover {
        background-color: var(--highlight);
        cursor: pointer;
      }
    }
    text-align: left;
    margin-bottom: 5px;
  }
 
  a {
    text-decoration:none;
    color: var(--trimColor);
    font-size:105%;
  }
  select {
    background-color: var(--bg);
    color: var(--text);
    font-size: inherit;
  }
}

.periodicTable {
  div.row1 {
    grid-row: 1 / 2;
  }
  div.row2 {
    grid-row: 2 / 3;
  }
  div.row3 {
    grid-row: 3 / 4;
  }
  div.row4 {
    grid-row: 4 / 5;
  }
  div.row5 {
    grid-row: 5 / 6;
  }
  div.row6 {
    grid-row: 6 / 7;
  }
  div.row7 {
    grid-row: 7 / 8;
  }
  div.row8 {
    grid-row: 8 / 9;
  }
  div.row9 {
    grid-row: 9 / 10;
  }
  div.row10 {
    grid-row: 10 / 11;
  }
  div.row11 {
    grid-row: 11 / 12;
  }
  div.col1 {
    grid-column: 1 / 2;
  }
  div.col2 {
    grid-column: 2 / 3;
  }
  div.col3 {
    grid-column: 3 / 4;
  }
  div.col4 {
    grid-column: 4 / 5;
  }
  div.col5 {
    grid-column: 5 / 6;
  }
  div.col6 {
    grid-column: 6 / 7;
  }
  div.col7 {
    grid-column: 7 / 8;
  }
  div.col8 {
    grid-column: 8 / 9;
  }
  div.col9 {
    grid-column: 9 / 10;
  }
  div.col10 {
    grid-column: 10 / 11;
  }
  div.col11 {
    grid-column: 11 / 12;
  }
  div.col12 {
    grid-column: 12 / 13;
  }
  div.col13 {
    grid-column: 13 / 14;
  }
  div.col14 {
    grid-column: 14 / 15;
  }
  div.col15 {
    grid-column: 15 / 16;
  }
  div.col16 {
    grid-column: 16 / 17;
  }
  div.col17 {
    grid-column: 17 / 18;
  }
  div.col18 {
    grid-column: 18 / 19;
  }
  div.col19 {
    grid-column: 19 / 20;
  }
}
#theTable {

  display: grid;
  grid-gap: var(--gutters);
  background-color: var(--bg);
  transition:background-color .5s linear;
  
  #connector {
    #lanth_connector {
      color:hsl(334deg, 76%, 86%);
    }
    #act_connector {
      color:#fce0ed;
    }
    text-align: center;
    display: grid;
    place-items: center center;
    div {
      font-size: 220%;
    }
  }
  #banner1 {
    font-family: "Press Start 2P", cursive;
    font-size: 12em;
    font-weight: boldest;
    text-align: center;
    padding:150px;
    display:grid;
    place-items:center center;
    
  }
  div#summary {
    display:none;
    font-size:4em;
    p:first-letter {
      padding:10px;
      font-size: 200%;
    }
    align-items:center;
  }
  & > span {
    padding: 5px;//general sub-section of an element div.

  }
  /*  GRID MARKERS  */
  div.header_group, div.header_period {
    display:grid; 
    font-size:300%;
  }
  div.header_period {
    place-items:center end;    
  }
  div.header_group {
    place-items:end center;
  }
  
  //ELEMENT CONTAINER DIVS
  & > div:not([class~='header_group']):not([class~='header_period']):not([id^="banner"]):not([id="connector"]):not([id="summary"]) {
    
    column-count: 3;
    column-gap: 3px;
    padding: 10px;
    border: 5px solid var(--text);
    box-shadow: (-var(--gutters)) 0 0 0 var(--border-color),
      0 var(--gutters) 0 0 var(--border-color),
      var(--gutters) var(--gutters) 0 0 var(--border-color),
      var(--gutters) 0 0 0 var(--border-color),
      0 var(--gutters) 0 0 var(--border-color);
    span {
      display: block;
    }
    div {
      /*each subection: ex: Boil*/
      //width: 100px;
      //padding-left:10px;
      text-align:left;
    }
    div.keyValuePair {
      break-inside: avoid;
    }
    span.key {
      color: var(--key);
    }
    span.units {
      font-style: italic;
      font-size: 90%;
      margin-left: 0.25em;
    }
    span.value {
      margin-left: 10px;
      font-family: monospace;
    }
    span.nested span,
    span.units {
      display: inline;
    }
    span.cpk {
      display: grid;
      place-items: center center;
      span {
        filter: invert(1) grayscale(0.9) contrast(50); //cpk and series
      }
    }
  }
  .card {
    position: relative;
    .radioactive {
      &:after {
        content: "‚ò¢Ô∏è";
        position: absolute;
        right: 0;
        top: 0;
        font-size: 35%;
        text-shadow: none;
      }
    }
    padding: 10px;
    break-inside: avoid-column;
    span {
      margin: 5px;
    }
    & > span:nth-child(1) { /*ELEMENT NUMBER*/
      font-size: 125%;
      font-weight: bold;
    }
    span:nth-child(2) {/*ELEMENT SYMBOL*/
      font-size: 500%;
      font-family: "Press Start 2P", cursive;
    }
    span:nth-child(3) {/*ELEMENT IMAGE*/
      text-align: center;
    }
    span.category {
      padding: 0;
      text-align: center;
      span {
        padding: 0;
        filter: invert(1) grayscale(1) contrast(50); //cpk and series
      }
    }
  }
  //special card rule for UUE (symbol can't be as big as the two-letter elements)
  div#Uue .card span:nth-child(2) {
    font-size:350%;
  }
  /*GRID layout*/
  div#summary { /*main chunk of text at the top of the table*/
    grid-row: 3/4;
    grid-column: 5/13;
  }
  div#banner1 {
    grid-row: 1/3;
    grid-column: 5/13;
  }
  div#connector {
    grid-row: 7/10;
    grid-column: 4/5;
  }
  
}

#controls {
  z-index:100;
  pointer-events:none;
  width:calc(100% - 15px);
  height:100vh;
  position:fixed;
  
  #miniTable {
    grid-template-columns: 0fr repeat(18, minmax(0px,1fr));
    background-color:black;
    pointer-events:auto;
    outline:1px solid var(--trimColor);
    div#banner1 {
      grid-row: 2/5;
      grid-column: 4/14;
      border:none;
    }
    z-index:100;
    &:hover {
      cursor:move;
    }
    position:absolute;
    font-size:clamp(1.5vmin, .8em, 20px);
    padding:0;
    & > div {
      &:hover:not(#banner1) {
        cursor:pointer;
      }
      text-align:center;
      margin:.2vw;
      border:clamp(.1vw, 1px, .3vw) solid var(--trimColor);
      margin-bottom:.2vw;

      &:hover:not(#banner1) {
        background-color:chartreuse;
        color:black;
      }
    }
    
    display:grid;
    top:0;
    right:0;
  }
  a {
    z-index:101;
  }
}

/*LIGHT MODE*/
body.light {
  color: var(--text2);
  background-color: var(--bg2);
  a {
    color: blue;
  }
  #theTable {
    background-color: var(--bg2);
    .card {
      background-color: var(--card2);
    }
    & > :not([class~='header_period']):not([class~='header_group']):not([id^="banner"]):not([id="connector"]):not([id="summary"]) {
      border-color: var(--text2);
      span.key {
        color: var(--key2);
        border-color: var(--text2);
      }
    }
    #connector #lanth_connector, #connector #act_connector {
      color:black;
    }
  }
  #controls {

    #miniTable {
   //  outline:1px solid black;
      color:var(--text2);
      background-color:var(--bg2);
      & > div {
        // border:1px solid black;
      }
    }
  }
}
</style>
<body>

  <div title="toggle night/day" id="lightMode"><span>üåõÔ∏è</span></div>
 
  <div id="controls">
    <div id="miniTable" draggable="true" class="periodicTable">
     <div id="banner1" style="background-color:transparent">
       <p>World's Largest</p>
       <p>Periodic Table of Elements</p>
    </div>
      <div id="H" class="row2 col2 diatomic-nonmetal"></div>
      <div id="He" class="row2 col19 noble-gas"></div>
      <div id="Li" class="row3 col2 alkali-metal"></div>
      <div id="Be" class="row3 col3 alkaline-earth-metal"></div>
      <div id="B" class="row3 col14 metalloid"></div>
      <div id="C" class="row3 col15 polyatomic-nonmetal"></div>
      <div id="N" class="row3 col16 diatomic-nonmetal"></div>
      <div id="O" class="row3 col17 diatomic-nonmetal"></div>
      <div id="F" class="row3 col18 diatomic-nonmetal"></div>
      <div id="Ne" class="row3 col19 noble-gas"></div>
      <div id="Na" class="row4 col2 alkali-metal"></div>
      <div id="Mg" class="row4 col3 alkaline-earth-metal"></div>
      <div id="Al" class="row4 col14 post-transition-metal"></div>
      <div id="Si" class="row4 col15 metalloid"></div>
      <div id="P" class="row4 col16 polyatomic-nonmetal"></div>
      <div id="S" class="row4 col17 polyatomic-nonmetal"></div>
      <div id="Cl" class="row4 col18 diatomic-nonmetal"></div>
      <div id="Ar" class="row4 col19 noble-gas"></div>
      <div id="K" class="row5 col2 alkali-metal"></div>
      <div id="Ca" class="row5 col3 alkaline-earth-metal"></div>
      <div id="Sc" class="row5 col4 transition-metal"></div>
      <div id="Ti" class="row5 col5 transition-metal"></div>
      <div id="V" class="row5 col6 transition-metal"></div>
      <div id="Cr" class="row5 col7 transition-metal"></div>
      <div id="Mn" class="row5 col8 transition-metal"></div>
      <div id="Fe" class="row5 col9 transition-metal"></div>
      <div id="Co" class="row5 col10 transition-metal"></div>
      <div id="Ni" class="row5 col11 transition-metal"></div>
      <div id="Cu" class="row5 col12 transition-metal"></div>
      <div id="Zn" class="row5 col13 transition-metal"></div>
      <div id="Ga" class="row5 col14 post-transition-metal"></div>
      <div id="Ge" class="row5 col15 metalloid"></div>
      <div id="As" class="row5 col16 metalloid"></div>
      <div id="Se" class="row5 col17 polyatomic-nonmetal"></div>
      <div id="Br" class="row5 col18 diatomic-nonmetal"></div>
      <div id="Kr" class="row5 col19 noble-gas"></div>
      <div id="Rb" class="row6 col2 alkali-metal"></div>
      <div id="Sr" class="row6 col3 alkaline-earth-metal"></div>
      <div id="Y" class="row6 col4 transition-metal"></div>
      <div id="Zr" class="row6 col5 transition-metal"></div>
      <div id="Nb" class="row6 col6 transition-metal"></div>
      <div id="Mo" class="row6 col7 transition-metal"></div>
      <div id="Tc" class="row6 col8 transition-metal"></div>
      <div id="Ru" class="row6 col9 transition-metal"></div>
      <div id="Rh" class="row6 col10 transition-metal"></div>
      <div id="Pd" class="row6 col11 transition-metal"></div>
      <div id="Ag" class="row6 col12 transition-metal"></div>
      <div id="Cd" class="row6 col13 transition-metal"></div>
      <div id="In" class="row6 col14 post-transition-metal"></div>
      <div id="Sn" class="row6 col15 post-transition-metal"></div>
      <div id="Sb" class="row6 col16 metalloid"></div>
      <div id="Te" class="row6 col17 metalloid"></div>
      <div id="I" class="row6 col18 diatomic-nonmetal"></div>
      <div id="Xe" class="row6 col19 noble-gas"></div>
      <div id="Cs" class="row7 col2 alkali-metal"></div>
      <div id="Ba" class="row7 col3 alkaline-earth-metal"></div>
      <div id="La" class="row10 col4 lanthanide"></div>
      <div id="Ce" class="row10 col5 lanthanide"></div>
      <div id="Pr" class="row10 col6 lanthanide"></div>
      <div id="Nd" class="row10 col7 lanthanide"></div>
      <div id="Pm" class="row10 col8 lanthanide"></div>
      <div id="Sm" class="row10 col9 lanthanide"></div>
      <div id="Eu" class="row10 col10 lanthanide"></div>
      <div id="Gd" class="row10 col11 lanthanide"></div>
      <div id="Tb" class="row10 col12 lanthanide"></div>
      <div id="Dy" class="row10 col13 lanthanide"></div>
      <div id="Ho" class="row10 col14 lanthanide"></div>
      <div id="Er" class="row10 col15 lanthanide"></div>
      <div id="Tm" class="row10 col16 lanthanide"></div>
      <div id="Yb" class="row10 col17 lanthanide"></div>
      <div id="Lu" class="row10 col18 lanthanide"></div>
      <div id="Hf" class="row7 col5 transition-metal"></div>
      <div id="Ta" class="row7 col6 transition-metal"></div>
      <div id="W" class="row7 col7 transition-metal"></div>
      <div id="Re" class="row7 col8 transition-metal"></div>
      <div id="Os" class="row7 col9 transition-metal"></div>
      <div id="Ir" class="row7 col10 transition-metal"></div>
      <div id="Pt" class="row7 col11 transition-metal"></div>
      <div id="Au" class="row7 col12 transition-metal"></div>
      <div id="Hg" class="row7 col13 transition-metal"></div>
      <div id="Tl" class="row7 col14 post-transition-metal"></div>
      <div id="Pb" class="row7 col15 post-transition-metal"></div>
      <div id="Bi" class="row7 col16 post-transition-metal"></div>
      <div id="Po" class="row7 col17 post-transition-metal"></div>
      <div id="At" class="row7 col18 metalloid"></div>
      <div id="Rn" class="row7 col19 noble-gas"></div>
      <div id="Fr" class="row8 col2 alkali-metal"></div>
      <div id="Ra" class="row8 col3 alkaline-earth-metal"></div>
      <div id="Ac" class="row11 col4 actinide"></div>
      <div id="Th" class="row11 col5 actinide"></div>
      <div id="Pa" class="row11 col6 actinide"></div>
      <div id="U" class="row11 col7 actinide"></div>
      <div id="Np" class="row11 col8 actinide"></div>
      <div id="Pu" class="row11 col9 actinide"></div>
      <div id="Am" class="row11 col10 actinide"></div>
      <div id="Cm" class="row11 col11 actinide"></div>
      <div id="Bk" class="row11 col12 actinide"></div>
      <div id="Cf" class="row11 col13 actinide"></div>
      <div id="Es" class="row11 col14 actinide"></div>
      <div id="Fm" class="row11 col15 actinide"></div>
      <div id="Md" class="row11 col16 actinide"></div>
      <div id="No" class="row11 col17 actinide"></div>
      <div id="Lr" class="row11 col18 actinide"></div>
      <div id="Rf" class="row8 col5 transition-metal"></div>
      <div id="Db" class="row8 col6 transition-metal"></div>
      <div id="Sg" class="row8 col7 transition-metal"></div>
      <div id="Bh" class="row8 col8 transition-metal"></div>
      <div id="Hs" class="row8 col9 transition-metal"></div>
      <div id="Mt" class="row8 col10 unknown"></div>
      <div id="Ds" class="row8 col11 unknown"></div>
      <div id="Rg" class="row8 col12 unknown"></div>
      <div id="Cn" class="row8 col13 unknown"></div>
      <div id="Nh" class="row8 col14 unknown"></div>
      <div id="Fl" class="row8 col15 unknown"></div>
      <div id="Mc" class="row8 col16 unknown"></div>
      <div id="Lv" class="row8 col17 unknown"></div>
      <div id="Ts" class="row8 col18 unknown"></div>
      <div id="Og" class="row8 col19 unknown"></div>
      <div id="Uue" class="row9 col2 unknown"></div>
    </div>
  </div>
  
  <div id="theTable" class="periodicTable">
    <div id="summary">
      <p>The periodic table, also known as the periodic table of (the) elements, is a tabular display of the chemical
        elements. It is widely used in chemistry, physics, and other sciences, and is generally seen as an icon of
        chemistry. It is a graphic formulation of the periodic law, which states that the properties of the chemical
        elements exhibit a periodic dependence on their atomic numbers.</p>

      <p>The table is divided into four roughly rectangular areas called blocks. The rows of the table are called
        periods, and the columns are called groups. Elements from the same column group of the periodic table show
        similar chemical characteristics. Trends run through the periodic table, with nonmetallic character (keeping
        their own electrons) increasing from left to right across a period, and from down to up across a group, and
        metallic character (surrendering electrons to other atoms) increasing in the opposite direction. The underlying
        reason for these trends is electron configurations of atoms.</p>

      <p>The first periodic table to become generally accepted was that of the Russian chemist Dmitri Mendeleev in 1869:
        he formulated the periodic law as a dependence of chemical properties on atomic mass. Because not all elements
        were then known, there were gaps in his periodic table, and Mendeleev successfully used the periodic law to
        predict properties of some of the missing elements. The periodic law was recognized as a fundamental discovery
        in the late 19th century, and it was explained with the discovery of the atomic number and pioneering work in
        quantum mechanics of the early 20th century that illuminated the internal structure of the atom. With Glenn T.
        Seaborg's 1945 discovery that the actinides were in fact f-block rather than d-block elements, a recognisably
        modern form of the table was reached. The periodic table and law are now a central and indispensable part of
        modern chemistry.</p>

      <p>The periodic table continues to evolve with the progress of science. In nature, only elements up to atomic
        number 94 exist; to go further, it was necessary to synthesise new elements in the laboratory. Today, all the
        first 118 elements are known, completing the first seven rows of the table, but chemical characterisation is
        still needed for the heaviest elements to confirm that their properties match their positions. It is not yet
        known how far the table will stretch beyond and whether the patterns of the known part of the table will
        continue into this unknown region. Some scientific discussion also continues regarding whether some elements are
        correctly positioned in today's table. Many alternative representations of the periodic law exist, and there is
        some discussion as to whether or not there is an optimal form of the periodic table.</p>

      <p>The smallest constituents of all normal matter are known as atoms. Atoms are extremely small, being about one
        ten-billionth of a meter across; thus their internal structure is governed by quantum mechanics. Atoms consist
        of a small positively charged nucleus, made of positively charged protons and uncharged neutrons, surrounded by
        a cloud of negatively charged electrons; the charges cancel out, so atoms are neutral. Electrons participate in
        chemical reactions, but the nucleus does not. When atoms participate in chemical reactions, they may gain or
        lose electrons to form positively- or negatively-charged ions; or they may share electrons with each other
        instead.</p>

      <p>Atoms can be subdivided into different types based on the number of protons (and thus also electrons) they
        have. This is called the atomic number, often symbolised Z as German for number is Zahl. Each distinct atomic
        number therefore corresponds to a class of atom: these classes are called the chemical elements. The chemical
        elements are what the periodic table classifies and organises. Hydrogen is the element with atomic number 1;
        helium, atomic number 2; lithium, atomic number 3; and so on. Each of these names can be further abbreviated by
        a one- or two-letter chemical symbol; those for hydrogen, helium, and lithium are respectively H, He, and Li.
        Neutrons do not affect the atom's chemical identity, but do affect its weight. Atoms with the same number of
        protons but different numbers of neutrons are called isotopes of the same chemical element. Naturally occurring
        elements usually occur as mixes of different isotopes; since each isotope usually occurs with a characteristic
        abundance, naturally occurring elements have well-defined atomic weights, defined as the average mass of a
        naturally occurring atom of that element.</p>

      <p>Today, 118 elements are known, the first 94 of which occur in nature. Of the 94 natural elements, eighty are
        stable; three more (bismuth, thorium, and uranium) undergo radioactive decay, but so slowly that large
        quantities survive from the formation of the Earth; and eleven more decay quickly enough that their continued
        trace occurrence rests on being constantly regenerated as intermediate products of the decay of thorium and
        uranium. All 24 known artificial elements are radioactive.</p>

      <span style="font-size:5header_0%;">(via Wikipedia) @sweaver2112</span>
    </div>
    <div id="banner1">
      <div>
        <p>World's Largest</p>
        <p>Periodic Table of Elements</p>
      </div>
    </div>
    <div class="row1 col2 header_group" id="group1">Group&nbsp;1</div>
    <div class="row2 col3 header_group" id="group2">Group&nbsp;2</div>
    <div class="row4 col4 header_group" id="group3">Group&nbsp;3</div>
    <div class="row4 col5 header_group" id="group4">Group&nbsp;4</div>
    <div class="row4 col6 header_group" id="group5">Group&nbsp;5</div>
    <div class="row4 col7 header_group" id="group6">Group&nbsp;6</div>
    <div class="row4 col8 header_group" id="group7">Group&nbsp;7</div>
    <div class="row4 col9 header_group" id="group8">Group&nbsp;8</div>
    <div class="row4 col10 header_group" id="group9">Group&nbsp;9</div>
    <div class="row4 col11 header_group" id="group10">Group&nbsp;10</div>
    <div class="row4 col12 header_group" id="group11">Group&nbsp;11</div>
    <div class="row4 col13 header_group" id="group12">Group&nbsp;12</div>
    <div class="row2 col14 header_group" id="group13">Group&nbsp;13</div>
    <div class="row2 col15 header_group" id="group14">Group&nbsp;14</div>
    <div class="row2 col16 header_group" id="group15">Group&nbsp;15</div>
    <div class="row2 col17 header_group" id="group16">Group&nbsp;16</div>
    <div class="row2 col18 header_group" id="group17">Group&nbsp;17</div>
    <div class="row1 col19 header_group" id="group17">Group&nbsp;18</div>

    <div class="col1 row2 header_period" id="period1">Period&nbsp;1</div>
    <div class="col1 row3 header_period" id="period2">Period&nbsp;2</div>
    <div class="col1 row4 header_period" id="period3">Period&nbsp;3</div>
    <div class="col1 row5 header_period" id="period4">Period&nbsp;4</div>
    <div class="col1 row6 header_period" id="period5">Period&nbsp;5</div>
    <div class="col1 row7 header_period" id="period6">Period&nbsp;6</div>
    <div class="col1 row8 header_period" id="period7">Period&nbsp;7</div>
    <div class="col1 row9 header_period" id="period8">Period&nbsp;8</div>

    <div id="H" class="row2 col2 diatomic-nonmetal"></div>
    <div id="He" class="row2 col19 noble-gas"></div>
    <div id="Li" class="row3 col2 alkali-metal"></div>
    <div id="Be" class="row3 col3 alkaline-earth-metal"></div>
    <div id="B" class="row3 col14 metalloid"></div>
    <div id="C" class="row3 col15 polyatomic-nonmetal"></div>
    <div id="N" class="row3 col16 diatomic-nonmetal"></div>
    <div id="O" class="row3 col17 diatomic-nonmetal"></div>
    <div id="F" class="row3 col18 diatomic-nonmetal"></div>
    <div id="Ne" class="row3 col19 noble-gas"></div>
    <div id="Na" class="row4 col2 alkali-metal"></div>
    <div id="Mg" class="row4 col3 alkaline-earth-metal"></div>
    <div id="Al" class="row4 col14 post-transition-metal"></div>
    <div id="Si" class="row4 col15 metalloid"></div>
    <div id="P" class="row4 col16 polyatomic-nonmetal"></div>
    <div id="S" class="row4 col17 polyatomic-nonmetal"></div>
    <div id="Cl" class="row4 col18 diatomic-nonmetal"></div>
    <div id="Ar" class="row4 col19 noble-gas"></div>
    <div id="K" class="row5 col2 alkali-metal"></div>
    <div id="Ca" class="row5 col3 alkaline-earth-metal"></div>
    <div id="Sc" class="row5 col4 transition-metal"></div>
    <div id="Ti" class="row5 col5 transition-metal"></div>
    <div id="V" class="row5 col6 transition-metal"></div>
    <div id="Cr" class="row5 col7 transition-metal"></div>
    <div id="Mn" class="row5 col8 transition-metal"></div>
    <div id="Fe" class="row5 col9 transition-metal"></div>
    <div id="Co" class="row5 col10 transition-metal"></div>
    <div id="Ni" class="row5 col11 transition-metal"></div>
    <div id="Cu" class="row5 col12 transition-metal"></div>
    <div id="Zn" class="row5 col13 transition-metal"></div>
    <div id="Ga" class="row5 col14 post-transition-metal"></div>
    <div id="Ge" class="row5 col15 metalloid"></div>
    <div id="As" class="row5 col16 metalloid"></div>
    <div id="Se" class="row5 col17 polyatomic-nonmetal"></div>
    <div id="Br" class="row5 col18 diatomic-nonmetal"></div>
    <div id="Kr" class="row5 col19 noble-gas"></div>
    <div id="Rb" class="row6 col2 alkali-metal"></div>
    <div id="Sr" class="row6 col3 alkaline-earth-metal"></div>
    <div id="Y" class="row6 col4 transition-metal"></div>
    <div id="Zr" class="row6 col5 transition-metal"></div>
    <div id="Nb" class="row6 col6 transition-metal"></div>
    <div id="Mo" class="row6 col7 transition-metal"></div>
    <div id="Tc" class="row6 col8 transition-metal"></div>
    <div id="Ru" class="row6 col9 transition-metal"></div>
    <div id="Rh" class="row6 col10 transition-metal"></div>
    <div id="Pd" class="row6 col11 transition-metal"></div>
    <div id="Ag" class="row6 col12 transition-metal"></div>
    <div id="Cd" class="row6 col13 transition-metal"></div>
    <div id="In" class="row6 col14 post-transition-metal"></div>
    <div id="Sn" class="row6 col15 post-transition-metal"></div>
    <div id="Sb" class="row6 col16 metalloid"></div>
    <div id="Te" class="row6 col17 metalloid"></div>
    <div id="I" class="row6 col18 diatomic-nonmetal"></div>
    <div id="Xe" class="row6 col19 noble-gas"></div>
    <div id="Cs" class="row7 col2 alkali-metal"></div>
    <div id="Ba" class="row7 col3 alkaline-earth-metal"></div>
    <div id="La" class="row10 col4 lanthanide"></div>
    <div id="Ce" class="row10 col5 lanthanide"></div>
    <div id="Pr" class="row10 col6 lanthanide"></div>
    <div id="Nd" class="row10 col7 lanthanide"></div>
    <div id="Pm" class="row10 col8 lanthanide"></div>
    <div id="Sm" class="row10 col9 lanthanide"></div>
    <div id="Eu" class="row10 col10 lanthanide"></div>
    <div id="Gd" class="row10 col11 lanthanide"></div>
    <div id="Tb" class="row10 col12 lanthanide"></div>
    <div id="Dy" class="row10 col13 lanthanide"></div>
    <div id="Ho" class="row10 col14 lanthanide"></div>
    <div id="Er" class="row10 col15 lanthanide"></div>
    <div id="Tm" class="row10 col16 lanthanide"></div>
    <div id="Yb" class="row10 col17 lanthanide"></div>
    <div id="Lu" class="row10 col18 lanthanide"></div>
    <div id="Hf" class="row7 col5 transition-metal"></div>
    <div id="Ta" class="row7 col6 transition-metal"></div>
    <div id="W" class="row7 col7 transition-metal"></div>
    <div id="Re" class="row7 col8 transition-metal"></div>
    <div id="Os" class="row7 col9 transition-metal"></div>
    <div id="Ir" class="row7 col10 transition-metal"></div>
    <div id="Pt" class="row7 col11 transition-metal"></div>
    <div id="Au" class="row7 col12 transition-metal"></div>
    <div id="Hg" class="row7 col13 transition-metal"></div>
    <div id="Tl" class="row7 col14 post-transition-metal"></div>
    <div id="Pb" class="row7 col15 post-transition-metal"></div>
    <div id="Bi" class="row7 col16 post-transition-metal"></div>
    <div id="Po" class="row7 col17 post-transition-metal"></div>
    <div id="At" class="row7 col18 metalloid"></div>
    <div id="Rn" class="row7 col19 noble-gas"></div>
    <div id="Fr" class="row8 col2 alkali-metal"></div>
    <div id="Ra" class="row8 col3 alkaline-earth-metal"></div>
    <div id="Ac" class="row11 col4 actinide"></div>
    <div id="Th" class="row11 col5 actinide"></div>
    <div id="Pa" class="row11 col6 actinide"></div>
    <div id="U" class="row11 col7 actinide"></div>
    <div id="Np" class="row11 col8 actinide"></div>
    <div id="Pu" class="row11 col9 actinide"></div>
    <div id="Am" class="row11 col10 actinide"></div>
    <div id="Cm" class="row11 col11 actinide"></div>
    <div id="Bk" class="row11 col12 actinide"></div>
    <div id="Cf" class="row11 col13 actinide"></div>
    <div id="Es" class="row11 col14 actinide"></div>
    <div id="Fm" class="row11 col15 actinide"></div>
    <div id="Md" class="row11 col16 actinide"></div>
    <div id="No" class="row11 col17 actinide"></div>
    <div id="Lr" class="row11 col18 actinide"></div>
    <div id="Rf" class="row8 col5 transition-metal"></div>
    <div id="Db" class="row8 col6 transition-metal"></div>
    <div id="Sg" class="row8 col7 transition-metal"></div>
    <div id="Bh" class="row8 col8 transition-metal"></div>
    <div id="Hs" class="row8 col9 transition-metal"></div>
    <div id="Mt" class="row8 col10 unknown"></div>
    <div id="Ds" class="row8 col11 unknown"></div>
    <div id="Rg" class="row8 col12 unknown"></div>
    <div id="Cn" class="row8 col13 unknown"></div>
    <div id="Nh" class="row8 col14 unknown"></div>
    <div id="Fl" class="row8 col15 unknown"></div>
    <div id="Mc" class="row8 col16 unknown"></div>
    <div id="Lv" class="row8 col17 unknown"></div>
    <div id="Ts" class="row8 col18 unknown"></div>
    <div id="Og" class="row8 col19 unknown"></div>
    <div id="Uue" class="row9 col2 unknown"></div>
    <div id="connector">
      <div id="lanth_connector">
        <div>57-71</div>
        <div>The Lanthanides</div>
      </div>
      <div id="act_connector">
        <div>89-103</div>
        <div>The Actinides</div>
      </div>
      <div style="font-size:20em">‚á©Ô∏è</div>
    </div>
  </div>

 <script>var pt = document.querySelector("#theTable")
var mt = document.querySelector("#miniTable")
var summary = document.querySelector("#summary")
var search = document.querySelector("#search")
var c1 = document.querySelector("#startColor")
var c2 = document.querySelector("#endColor")

var elementEls = [...pt.querySelectorAll(":scope > div:not([class~='header_group']):not([class~='header_period']):not([id^='banner']):not([id^='connector']):not([id^='summary'])")];
const labelMap = {
  "cpk_hex": "CPK color",
  "category":"Series",
  "electron_configuration":"Electron config",
  "electron_configuration_semantic":"Electron config Semantic",
  "electronegativity_pauling":"Electronegativity",
  "ionization_energies":"Ionization (kJ/mol)",
  "melt":"Melting Point",
  "boil":"Boiling Point",
  "phase":"Phase (0¬∞C)",
  "xpos":"Group"
}
const seriesColors = {
  "unknown":"#989898",
  "alkali metal":"hsl(48deg, 77%, 64%)",
  "alkaline earth metal":"hsl(60deg, 83%, 67%)",
  "lanthanide":"hsl(334deg, 76%, 86%)",
  "actinide":"#fce0ed",
  "transition metal":"hsl(10deg, 63%, 84%)",
  "metalloid":"hsl(165deg, 58%, 76%)",
  "polyatomic nonmetal":"hsl(120deg, 73%, 74%)",
  "diatomic nonmetal":"hsl(120deg, 73%, 74%)",
  "post-transition metal":"hsl(222deg, 62%, 80%)",
  "noble gas":"hsl(300deg, 74%, 82%)",
}
const superscripts = {'0':'‚Å∞','1':'¬π','2':'¬≤','3':'¬≥','4':'‚Å¥','5':'‚Åµ','6':'‚Å∂','7':'‚Å∑','8':'‚Å∏','9':'‚Åπ'}
const unitsMap = {
  "atomic_mass":"amu",
  "Celsius":"¬∞",
  "Fahrenheit":"¬∞",
  "Kelvin": "K",
  "electron_affinity":"kJ/mol",
  "electronegativity_pauling":"kJ/mol",
  "ionization_energies":"kJ/mol",
  "radius":"pm",/*hardness*/
  "vickers":"MPa",
  "brinell":"MPa",
  "mohs":"MPa",
  "bulk":"GPa",/*modulus*/
  "shear":"GPa",
  "young":"GPa",
  "stp":"kg/m¬≥",/*density*/
  "liquid":"kg/m¬≥",
  "thermal":"W/mK",/*conductivity*/
  "electric":"MS/m",
  "specific":"J/kgK",/*heat*/
  "fusion":"kJ/mol",
  "vaporization":"kJ/mol",
  "molar":"J/K.mol",
  "universe":"%",/*abundance*/
  "solar":"%",
  "meteor":"%",
  "ocean":"%",
  "crust":"%",
  "human":"%",
  "calculated":"pm",/*radius*/
  "empirical":"pm",
  "covalent":"pm",
  "vanderwaals":"pm"
}
const colorMap = {
  "boil":{ "start": "#0000ff", "end": "#ff0000"},
  "melt":{ "start": "#0000ff", "end": "#ff0000"},
  "abundance":{ "start": "#8989ae", "end": "#ffae00"},
  "density":{ "start": "#ff00ff", "end": "#ffff00"},
  "atomic_mass":{ "start": "#e38ce3", "end": "#ffff00"},
  "discovered":{ "start": "#0f00ff", "end": "#f5efef"},
  "electron_affinity":{ "start": "#00fffff", "end": "#f3d720"},
  "electronegativity_pauling":{ "start": "#eccaec", "end": "#ff0240"},
  "hardness":{ "start": "#d9c4e4", "end": "#8b0ff5"},
  "heat":{ "start": "#0000ff", "end": "#ff0000"},
  "density":{ "start": "#8ad6ee", "end": "#ffff00"},
  "radius":{"start":"#e9f631", "end": "#000fff"},
  "conductivity":{"start":"#0ffff0", "end":"#e11466"},
  "modulus":{"start":"#cbd194", "end":"#0000ff"}
}

/*fields either not displayed at all in the details section, or are instead displayed in the "element card"*/
var doNotDisplay = ["ypos", "source"];
/*detail fields that are color-sortable*/
var clickableDetail = ["summary", "abundance", "atomic_mass", "boil", "conductivity", "density", "discovered", "electron_affinity", "electronegativity_pauling", "heat", "melt", "hardness", "modulus", "radius", "category", "cpk_hex" ]

/*ok, first, shape the data a bit by adding some calculated temps*/
window.pTable.forEach(el=>{
  el.boil && (el.boil = {
    "Celsius": (el.boil-273.15).toFixed(2),
    "Fahrenheit":((el.boil-273.15) * (9/5) + 32).toFixed(2),
    "Kelvin":el.boil
  })
  el.melt && (el.melt = {
    "Celsius": (el.melt-273.15).toFixed(2),
    "Fahrenheit":((el.melt-273.15) * (9/5) + 32).toFixed(2),
    "Kelvin":el.melt
  })
})

let handleNavClick = (el) => {
  let realEl = pt.querySelector(`#${el.id}`)
  //const element = realEl
  //const elementRect = element.getBoundingClientRect();
  //const absoluteElementTop = elementRect.top + window.pageYOffset;
  //const middle = absoluteElementTop - (window.innerHeight / 2);
  realEl.scrollIntoView({behavior:'smooth', block: "center"})
}

/*MAIN LOOP*/

var last
function handleMouseEnter(ev) {
  if(last!=undefined) {
    last.style.outline = "none"
  }
     
  last = mt.querySelector(`#${ev.target.id}`);
  last.style.outline = "2px solid chartreuse"
}
elementEls.forEach(async (el,i)=>{
   
    el.addEventListener("mouseenter", handleMouseEnter)
  
    /*CARD*/
    let element = window.pTable.find(t=>t.symbol==el.id);
    
    /*NAV table*/
    let m = miniTable.querySelector(`#${element.symbol}`)
    m.innerText = element.symbol;
    m.addEventListener("click", () => {
      handleNavClick(m)
    })
    
    let color = "#"+element.cpk_hex
    var neon = `text-shadow: 0 0 5px white, 0 0 10px ${color}, 0 0 15px ${color}, 0 0 20px ${color}`
    let card = document.createElement("div")
    card.classList.add("card")
    card.innerHTML = `<span>${element.number}</span>`
    let isRadioActive = /radioactive/.test(element.summary);
    //let radioActiveStr = isRadioActive ? "<span class='radioactive'>‚ò¢Ô∏è</span>" : ""

  /******** ELEMENT IMAGE ********/
  let img = new Image()
  let imgFrag = ""
  if(elementImages[element.symbol]){
    let src = 'data:image/jpg;base64, '+ elementImages[element.symbol];
    await loadImage(img,src);
    img.width = img.naturalWidth/2;
    img.height = img.naturalHeight/2;
    imgFrag = "<span>"+img.outerHTML+"</span>"; 
  }
    
  
    card.innerHTML += `<span class='${isRadioActive?"radioactive":""}' style="${neon}">${element.symbol}</span>${imgFrag}`
    let catLabel = element.category.match(/unknown|.*/i)[0]
    card.innerHTML += `<span class='category' style='background-color:${seriesColors[catLabel]}'><span style='color:${seriesColors[catLabel]}'>${catLabel}</span></span>`

    /*replace first occurence of name in the summary with the wiki link*/
    let findName = new RegExp(element.name, "i")
    let sum = element.summary.replace(findName, `<a target="_blank" href='${element.source}'>$&</a>`)
    card.innerHTML += `<span>${sum}</span>` 
    el.appendChild(card)
    
    /*DETAILS*/    
    /*first, sort the fields not by their real name, but by their mapped label name if available*/
    let sortedFields = Object.keys(element).sort((a,b)=>{
      return (labelMap[a]||a).toLowerCase()>(labelMap[b]||b).toLowerCase() ? 1 : -1 
    })
    sortedFields = ["atomic_mass", "melt", "boil", "abundance", "appearance", "conductivity", "cpk_hex", "density", "discovered", "discovered_by", "electron_configuration", "electron_affinity", "electron_configuration_semantic", "electronegativity_pauling", "hardness", "heat", "ionization_energies", "modulus", "oxidation", "phase", "radius", "shells", "source", "xpos", "period"]

    sortedFields.forEach(key=> {   

      if(element[key] === undefined || doNotDisplay.some(dont=>dont==key)) return;

      let span = document.createElement("div")
      
      span.classList.add(key)
      span.classList.add("keyValuePair")

      let text = labelMap[key] || key
      text = capitalize(text)
      span.innerHTML= `<span class='key'>${text}:</span> <span class='value'>${printProp(key, element[key])}</span>`   
         
      el.appendChild(span)
      
      //change event for multi-data dropdowns (which is: color sort if already sorting on this category)
      span.querySelector("select")?.addEventListener("change", function(ev){
        let outerDiv = ev.target.parentNode.parentNode
        if(outerDiv.classList.contains("selected")){
          setColorByKey(outerDiv.id+"."+ev.target.value.match(/^\w+/)[0])
        }
      })
    })

})//end foreach elementEl

/*dark mode/light mode switch*/
document.querySelector("#lightMode").addEventListener("click", function(ev){
  if(ev.target.classList.contains("disabled")) {
     ev.target.classList.remove("disabled")
  } else {
     ev.target.classList.add("disabled")
  }
  let body = document.querySelector("body")
  if(body.classList.contains('light')) {
    body.classList.remove("light")
  } else {
    body.classList.add("light")
  }
})

mt.addEventListener('dragstart', handleDragStart);
document.body.ondragover = handleDragOver;
document.body.ondrop = handleDrop;

var MOUSEDOWN = false;
window.addEventListener("mousedown", (ev) => {
  if(ev.target.id == "miniTable") return false;
  MOUSEDOWN = true;
  document.body.style.cursor = "grabbing"
})
window.addEventListener("mouseup", (ev) => {
  MOUSEDOWN = false;
  document.body.style.cursor = "grab"
  
})
window.addEventListener("mousemove", (ev) => {
  if(MOUSEDOWN){
    window.scrollBy(-ev.movementX, -ev.movementY);
  }
})
window.addEventListener("mouseleave", (ev) => {
  MOUSEDOWN = false;
})

window.scrollTo(0,0)

console.log(`${pt.scrollWidth} x ${pt.scrollHeight}`)

function getElementKey(detailDiv) {
  /*get either simple key which is the div's id (eg "electron_affinity"), or if it contains <select>, get compound key eg "hardness.brickells" */
  let valueEl = detailDiv.children[1].children[0];
  if(valueEl.nodeName.toLowerCase()=="select"){
    let subKey = valueEl.value.match(/^[^:]+/)[0]
    return (detailDiv.id+"."+subKey)
  } else {
    return (detailDiv.id)
  }
}

function printProp(key,obj){
/*recursively call on obj types and build <selects> (a must to save space), otherwise, print the value*/
  if(typeof(obj)=="object"){
    let rez = ""
    let keys = Object.keys(obj)
    keys.forEach((key,i)=>{
      //the test here avoids the nested span which makes printing arrays too long, ok for other values.
      if(/^\d+$/.test(key)){
        rez += `<span class='nested'><span class='key'>${key}:</span><span class='value'>${printProp(key,obj[key])}</span></span>`
      } else {
        rez += `<span class='key'>${key}:</span><span class="value">${printProp(key,obj[key])}</span>`
      }
      
    })
    return rez.replace(/,$/, "")
  } else { //simple value
    if(/electron_configuration/.test(key)) obj = superScript(obj)
    let cpk = key=="cpk_hex" 
    if(cpk) {
      obj = "#"+obj
      let color = (obj=="#a67573"||obj=="#2194d6")? "black" : obj
      return `<span class='value cpk' style='background-color:${obj};color:${color}'><span>${isNumber(obj)?parseFloat(obj.toFixed(6)):obj}</span><span class='units'>${unitsMap[key]||""}</span></span>`
    } else {
      return `<span class='value'>${isNumber(obj)?parseFloat(obj.toFixed(6)):obj}<span class='units'>${unitsMap[key]||""}</span></span>`
    }

  }

}

/*UTILITY*/
function superScript(electron_config) {
  //superscript trailing numbers in electron config string.
  let cf = electron_config 
  return cf.replace(/(?<=[a-z])(\d+)/g, function(m,g1) {
    let rep = ""
    g1.split("").forEach((ch)=>{
      rep+=superscripts[Object.keys(superscripts).indexOf(ch)]
    })
    return rep
  })
}
function capitalize(str){
  //also makes _underscores_ spaces
  return str.replace(/_/g, " ").replace(/^[a-z]/, (m)=>{
    return m.toUpperCase()
  })
}
function hexToRGB(hex){   
  return hex.match(/[A-Za-z0-9]{2}/g).map(function(component) { return parseInt(component, 16) })
} 
function valueAt(key, obj) {
  return key.split('.').reduce((p,c)=>p?.[c]||null, obj)
}
function isNumber(n){
  return Number(n)===n;
}

async function delay(ms){
  return new Promise((resolve,reject)=>setTimeout(ms, resolve));
}

function loadImage(img,src) {
  return new Promise((res,rej)=>{
    img.onload = res;
    img.src = src;
  })
}

function handleDragStart(ev) {

    ev.target.setAttribute("myOffsetX", ev.offsetX)
    ev.target.setAttribute("myOffsetY", ev.offsetY)
    ev.dataTransfer.setData("text/plain", ev.target.id);

}
function handleDragOver(ev) {
  ev.preventDefault();
  ev.dataTransfer.dropEffect = "move";
}
function handleDrop(ev) {
  MOUSEDOWN = false;
  ev.preventDefault();
  const myId = ev.dataTransfer.getData("text/plain");
  var el = document.querySelector(`#${myId}`)
  ev.dataTransfer.dropEffect = "move";
 
  let w = parseInt(window.getComputedStyle(miniTable,null).width)
  let byMouse = ev.clientX-parseInt(el.getAttribute("myOffsetX"))
  el.style.left = byMouse+"px"
  let right;
  if(window.innerWidth < (byMouse+w)) {
    right = 0 - ((byMouse+w)-window.innerWidth) 
  } else {
    right = null
  }
  el.style.right = right?right+"px":"unset"
  el.style.top = (ev.clientY-parseInt(el.getAttribute("myOffsetY")))+"px"
}


</script>
</body>
